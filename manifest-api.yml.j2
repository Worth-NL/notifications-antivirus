---

applications:
  - name: notify-antivirus-api

    command: ./scripts/run_app_paas.sh gunicorn -c gunicorn_config.py application
    memory: 2G
    disk_quota: 2G

    routes:
      - route: notify-antivirus-{{ environment }}.cloudapps.digital

    health-check-type: http
    health-check-http-endpoint: /_status

    env:
      NOTIFY_APP_NAME: notify-antivirus-api
      CW_APP_NAME: antivirus
      STATSD_ENABLED: 1
      REDIS_ENABLED: '{{ REDIS_ENABLED }}'
      REDIS_URL: '{{ REDIS_URL }}'

      # Credentials variables
      AWS_ACCESS_KEY_ID: '{{ AWS_ACCESS_KEY_ID }}'
      AWS_SECRET_ACCESS_KEY: '{{ AWS_SECRET_ACCESS_KEY }}'
      STATSD_PREFIX: '{{ STATSD_PREFIX }}'
      NOTIFICATION_QUEUE_PREFIX: '{{ NOTIFICATION_QUEUE_PREFIX }}'

      ANTIVIRUS_API_KEY: '{{ ANTIVIRUS_API_KEY }}'
